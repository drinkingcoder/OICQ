<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fuck</title>
    <link rel="stylesheet" type="text/css" href="css/lazeemenu.css">
    <link rel="stylesheet" type="text/css" href="css/chatstyle.css" />
</head>
<body>

<div id="chatbox">
    <div id="friendslist">
        <div id="topmenu">
            <span class="friends"></span>
        </div>
        <div id="friends">
            <ul id="menu">
                <li>
                    <h3><span>Default Friends</span></h3>
                    <ul>
                        <li>
                            <div class="friend">
                                <img src="img/1_copy.jpg" />
                                <p>
                                    <strong>Miro Badev</strong>
                                    <span>mirobadev@gmail.com</span>
                                </p>
                                <div class="status available"></div>
                            </div>
                        </li>
                        <li>
                            <div class="friend">
                                <img src="img/2_copy.jpg" />
                                <p>
                                    <strong>Martin Joseph</strong>
                                    <span>marjoseph@gmail.com</span>
                                </p>
                                <div class="status away"></div>
                            </div>
                        </li>
                    </ul>
                </li>
                <li>
                    <h3><span>Best Friend</span></h3>
                    <ul>
                        <li>
                            <div class="friend">
                                <img src="img/3_copy.jpg" />
                                <p>
                                    <strong>Tomas Kennedy</strong>
                                    <span>tomaskennedy@gmail.com</span>
                                </p>
                                <div class="status inactive"></div>
                            </div>
                        </li>
                        <li>
                            <div class="friend">
                                <img src="img/4_copy.jpg" />
                                <p>
                                    <strong>Enrique	Sutton</strong>
                                    <span>enriquesutton@gmail.com</span>
                                </p>
                                <div class="status inactive"></div>
                            </div>
                        </li>
                        <li>
                            <div class="friend">
                                <img src="img/4_copy.jpg" />
                                <p>
                                    <strong>Enrique	Sutton</strong>
                                    <span>enriquesutton@gmail.com</span>
                                </p>
                                <div class="status inactive"></div>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>

        <div id="search">
            <input type="text" id="searchfield" value="Search contacts..." />
        </div>
    </div>




    <div id="chatview" class="p1">
        <div id="profile">

            <div id="close">
                <div class="cy"></div>
                <div class="cx"></div>
            </div>

            <p>Miro Badev</p>
            <span>miro@badev@gmail.com</span>
        </div>
        <div id="chat-messages">
            <label>Thursday 02</label>

            <div class="message">
                <img src="img/1_copy.jpg" />
                <div class="bubble">
                    Really cool stuff!
                    <div class="corner"></div>
                    <span>3 min</span>
                </div>
            </div>

            <div class="message right">
                <img src="img/2_copy.jpg" />
                <div class="bubble">
                    Can you share a link for the tutorial?
                    <div class="corner"></div>
                    <span>1 min</span>
                </div>
            </div>

            <div class="message">
                <img src="img/1_copy.jpg" />
                <div class="bubble">
                    Yeah, hold on
                    <div class="corner"></div>
                    <span>Now</span>
                </div>
            </div>

            <div class="message right">
                <img src="img/2_copy.jpg" />
                <div class="bubble">
                    Can you share a link for the tutorial?
                    <div class="corner"></div>
                    <span>1 min</span>
                </div>
            </div>

            <div class="message">
                <img src="img/1_copy.jpg" />
                <div class="bubble">
                    Yeah, hold on
                    <div class="corner"></div>
                    <span>Now</span>
                </div>
            </div>

        </div>

        <div id="sendmessage">
            <input type="text" value="Send message..." />
            <button id="send"></button>
        </div>

    </div>
</div>

<!-- <ul id="menu">
    <li>
        <h3><span>Online Newspapers</span></h3>
        <ul>
            <li class="active"><a href="#">CNN</a></li>
            <li><a href="#">BBC</a></li>
            <li><a href="#">NRK</a></li>
        </ul>
    </li>
    <li>
        <h3><span>Funny sites</span></h3>
        <ul>
            <li><a href="#">Google</a></li>
            <li><a href="#">Bing</a></li>
            <li><a href="#">Yahoo</a></li>
        </ul>
    </li>
    <li>
        <h3><span>Search Engines</span></h3>
        <ul>
            <li><a href="#">Google</a></li>
            <li><a href="#">Bing</a></li>
            <li><a href="#">Yahoo</a></li>
        </ul>
    </li>
</ul> -->

<script src="javascripts/jquery-2.1.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="javascripts/lazeemenu-jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var data = {
            'group':{
                'Best Friends':{
                    'HHH':{
                        'email':'907328910@qq.com',
                        'online':'true'
                    },
                    'drinkingcoder':{
                        'email':'drinkingcoder@gmail.com',
                        'online':'false'
                    }
                }
            },
            'messages': {
                'HHH': [
                    {'Hello': '11:30:31'},
                    {'Bye': '11:31:32'}
                ],
                'drinkingcoder': [
                    {'lalala': '12:42:12'},
                    {'huahuahua': '12:54:12'}
                ]
            }
        };
        var messages;
        for(var groupname in data.group){
            var thisgroup = $("<li></li>").append(
                    $("<h3><span></span></h3>").text(groupname)
            );
            var tmp = $('<ul></ul>');
            for(var friend in data.group[groupname]) {
                var image = $('<img src="img/4_copy.jpg" />');

                var p = $('<p></p>');
                var name = $('<strong></strong>').text(friend);
                var email = $('<span></span>').text(data.group[groupname][friend].email);
                p = p.append(name).append(email);

                var online;
                if(data.group[groupname][friend].online == 'true') online = $('<div class="status active"></div>');
                else online =  $('<div class="status inactive"></div>');

                var li = $('<li></li>');
                var div = $('<div class="friend"></div>');
                div = div.append(image).append(p).append(online);
                li = li.append(div);
                tmp = tmp.append(li);
            }
            thisgroup = thisgroup.append(tmp);
            $('#menu').append(thisgroup);
        }
        $('#menu').lazeemenu();

        var preloadbg = document.createElement('img');
        preloadbg.src = 'img/timeline1.png';
        $('#searchfield').focus(function () {
            if ($(this).val() == 'Search contacts...') {
                $(this).val('');
            }
        });
        $('#searchfield').focusout(function () {
            if ($(this).val() == '') {
                $(this).val('Search contacts...');
            }
        });
        $('#sendmessage input').focus(function () {
            if ($(this).val() == 'Send message...') {
                $(this).val('');
            }
        });
        $('#sendmessage input').focusout(function () {
            if ($(this).val() == '') {
                $(this).val('Send message...');
            }
        });
        $('.friend').each(function () {
            $(this).click(function () {
                var childOffset = $(this).offset();
                var parentOffset = $(this).parent().parent().offset();
                var childTop = childOffset.top - parentOffset.top;
                var clone = $(this).find('img').eq(0).clone();
                var top = childTop + 12 + 'px';
                var name = $(this).find('p strong').html();
                var email = $(this).find('p span').html();
                $(clone).css({ 'top': top }).addClass('floatingImg').appendTo('#chatbox');
                setTimeout(function () {
                    $('#profile p').addClass('animate');
                    $('#profile').addClass('animate');
                }, 100);
                setTimeout(function () {
                    $('#chat-messages').addClass('animate');
                    $('.cx, .cy').addClass('s1');
                    setTimeout(function () {
                        $('.cx, .cy').addClass('s2');
                    }, 100);
                    setTimeout(function () {
                        $('.cx, .cy').addClass('s3');
                    }, 200);
                }, 150);
                $('.floatingImg').animate({
                    'width': '68px',
                    'left': '108px',
                    'top': '20px'
                }, 200);

                $('#profile p').html(name);
                $('#profile span').html(email);
                $('.message').not('.right').find('img').attr('src', $(clone).attr('src'));
                $('#friendslist').fadeOut();
                $('#chatview').fadeIn();
                $('#close').unbind('click').click(function () {
                    $('#chat-messages, #profile, #profile p').removeClass('animate');
                    $('.cx, .cy').removeClass('s1 s2 s3');
                    $('.floatingImg').animate({
                        'width': '40px',
                        'top': top,
                        'left': '12px'
                    }, 200, function () {
                        $('.floatingImg').remove();
                    });
                    setTimeout(function () {
                        $('#chatview').fadeOut();
                        $('#friendslist').fadeIn();
                    }, 50);
                });
            });
        });
    });
</script>
</body>
</html>
